<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Geocode Brazilian addresses — geocode • geocodebr</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Geocode Brazilian addresses — geocode"><meta name="description" content='Geocodes Brazilian addresses based on CNEFE data. Addresses must be passed as
a data frame in which each column describes one address field (street name,
street number, neighborhood, etc). The input addresses are matched with CNEFE
following different precision levels For more info, please see the Details
section. The output coordinates use the geodetic reference system
"SIRGAS2000", CRS(4674).'><meta property="og:description" content='Geocodes Brazilian addresses based on CNEFE data. Addresses must be passed as
a data frame in which each column describes one address field (street name,
street number, neighborhood, etc). The input addresses are matched with CNEFE
following different precision levels For more info, please see the Details
section. The output coordinates use the geodetic reference system
"SIRGAS2000", CRS(4674).'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">geocodebr</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.0.0.9001</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/geocodebr.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/geocoding_en.html">Geocoding with geocodebr (ENG)</a></li>
    <li><a class="dropdown-item" href="../articles/geocoding_pt.html">Geolocalização com geocodebr (PORT)</a></li>
    <li><a class="dropdown-item" href="../articles/reverse_geocoding.html">Reverse-geocoding (ENG)</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ipeaGIT/geocodebr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Geocode Brazilian addresses</h1>
      <small class="dont-index">Source: <a href="https://github.com/ipeaGIT/geocodebr/blob/main/R/geocode.R" class="external-link"><code>R/geocode.R</code></a></small>
      <div class="d-none name"><code>geocode.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Geocodes Brazilian addresses based on CNEFE data. Addresses must be passed as
a data frame in which each column describes one address field (street name,
street number, neighborhood, etc). The input addresses are matched with CNEFE
following different precision levels For more info, please see the Details
section. The output coordinates use the geodetic reference system
"SIRGAS2000", CRS(4674).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">geocode</span><span class="op">(</span></span>
<span>  <span class="va">addresses_table</span>,</span>
<span>  address_fields <span class="op">=</span> <span class="fu"><a href="setup_address_fields.html">setup_address_fields</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  n_cores <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  keep_matched_address <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  cache <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-addresses-table">addresses_table<a class="anchor" aria-label="anchor" href="#arg-addresses-table"></a></dt>
<dd><p>A data frame. The addresses to be geocoded. Each
column must represent an address field.</p></dd>


<dt id="arg-address-fields">address_fields<a class="anchor" aria-label="anchor" href="#arg-address-fields"></a></dt>
<dd><p>A character vector. The correspondence between each
address field and the name of the column that describes it in the
<code>addresses_table</code>. The <code><a href="setup_address_fields.html">setup_address_fields()</a></code> function helps creating
this vector and performs some checks on the input. Address fields
passed as <code>NULL</code> are ignored and the function must receive at least one
non-null field. If manually creating the vector, please note that the
vector names should be the same names used in the <code><a href="setup_address_fields.html">setup_address_fields()</a></code>
parameters.</p></dd>


<dt id="arg-n-cores">n_cores<a class="anchor" aria-label="anchor" href="#arg-n-cores"></a></dt>
<dd><p>A number. The number of cores to be used in parallel
execution. Defaults to 1.</p></dd>


<dt id="arg-progress">progress<a class="anchor" aria-label="anchor" href="#arg-progress"></a></dt>
<dd><p>A logical. Whether to display progress bars when downloading
CNEFE data and when geocoding the addresses. Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-keep-matched-address">keep_matched_address<a class="anchor" aria-label="anchor" href="#arg-keep-matched-address"></a></dt>
<dd><p>Logical. Whethe the output should include a
column indicating the matched address of reference. Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg-cache">cache<a class="anchor" aria-label="anchor" href="#arg-cache"></a></dt>
<dd><p>A logical. Whether CNEFE data should be saved to/read from
cache, reducing processing time in future calls. Defaults to <code>TRUE</code>. When
<code>FALSE</code>, CNEFE data is downloaded to a temporary directory.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns the data frame passed in <code>addresses_table</code> with the latitude
(<code>lat</code>) and longitude (<code>lon</code>) of each matched address, as well as two
columns (<code>precision</code> and <code>match_type</code>) indicating the precision level with
which the address was matched.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Precision categories:</p>
    </div>
    <div class="section level2">
    <h2 id="precision">Precision<a class="anchor" aria-label="anchor" href="#precision"></a></h2>
    <p>The results of geocodebr are classified into six broad <code>precision</code> categories:</p><ul><li><p>"numero"</p></li>
<li><p>"numero_interpolado"</p></li>
<li><p>"rua"</p></li>
<li><p>"cep"</p></li>
<li><p>"bairro"</p></li>
<li><p>"municipio"</p></li>
<li><p><code>NA</code> (not found)</p></li>
</ul><p>Each precision level can be disaggregated into more refined match types.</p>
    </div>
    <div class="section level2">
    <h2 id="match-type">Match Type<a class="anchor" aria-label="anchor" href="#match-type"></a></h2>
    <p>The column <code>match_type</code> provides more refined information on how exactly each
input address was matched with CNEFE. In every category, geocodebr takes
the average latitude and longitude of the addresses included in CNEFE that
match the input address based on combinations of different fields. In the
strictest case, for example, the function finds a deterministic match for all
of the fields of a given address (estado, municipio, logradouro, numero, cep,
localidade). Think for example of a building with several apartments that
match the same street address and number. In such case, the coordinates of
the apartments will differ very slightly, and geocodebr takes the average
of those coordinates. In a less rigorous example, in which only the fields
(estado, municipio, rua, bairro) are matched, geocodebr calculates the
average coordinates of all the addresses in CNEFE along that street and which
fall within the same neighborhood.</p>
<p>The complete list of precision levels and match type categories are:</p><ul><li><p>Precision: <strong>"numero"</strong></p><ul><li><p>match_type:</p><ul><li><p>en01: logradouro, numero, cep e bairro</p></li>
<li><p>en02: logradouro, numero e cep</p></li>
<li><p>en03: logradouro, numero e bairro</p></li>
<li><p>en04: logradouro e numero</p></li>
<li><p>pn01: logradouro, numero, cep e bairro</p></li>
<li><p>pn02: logradouro, numero e cep</p></li>
<li><p>pn03: logradouro, numero e bairro</p></li>
<li><p>pn04: logradouro e numero</p></li>
</ul></li>
</ul></li>
<li><p>Precision: <strong>"numero_interpolado"</strong></p><ul><li><p>match_type:</p><ul><li><p>ei01: logradouro, numero, cep e bairro</p></li>
<li><p>ei02: logradouro, numero e cep</p></li>
<li><p>ei03: logradouro, numero e bairro</p></li>
<li><p>ei04: logradouro e numero</p></li>
<li><p>pi01: logradouro, numero, cep e bairro</p></li>
<li><p>pi02: logradouro, numero e cep</p></li>
<li><p>pi03: logradouro, numero e bairro</p></li>
<li><p>pi04: logradouro e numero</p></li>
</ul></li>
</ul></li>
<li><p>Precision: <strong>"rua"</strong> (when input number is missing 'S/N')</p><ul><li><p>match_type:</p><ul><li><p>er01: logradouro, cep e bairro</p></li>
<li><p>er02: logradouro e cep</p></li>
<li><p>er03: logradouro e bairro</p></li>
<li><p>er04: logradouro</p></li>
<li><p>pr01: logradouro, cep e bairro</p></li>
<li><p>pr02: logradouro e cep</p></li>
<li><p>pr03: logradouro e bairro</p></li>
<li><p>pr04: logradouro</p></li>
</ul></li>
</ul></li>
<li><p>Precision: <strong>"cep"</strong></p><ul><li><p>match_type:</p><ul><li><p>ec01 municipio, cep, localidade</p></li>
<li><p>ec02 municipio, cep</p></li>
</ul></li>
</ul></li>
<li><p>Precision: <strong>"bairro"</strong></p><ul><li><p>match_type:</p><ul><li><p>eb01 municipio, localidade</p></li>
</ul></li>
</ul></li>
<li><p>Precision: <strong>"municipio"</strong></p><ul><li><p>match_type:</p><ul><li><p>em01 municipio</p></li>
</ul></li>
</ul></li>
</ul><p>Note: Match types starting with 'p' use probabilistic matching of the
logradouro field, while types starting with 'e' use deterministic matching
only. Match types with probabilistic matching ARE NOT implemented in
geocodebr yet.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">data_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/small_sample.csv"</span>, package <span class="op">=</span> <span class="st">"geocodebr"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">input_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="va">data_path</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fields</span> <span class="op">&lt;-</span> <span class="fu">geocodebr</span><span class="fu">::</span><span class="fu"><a href="setup_address_fields.html">setup_address_fields</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  logradouro <span class="op">=</span> <span class="st">"nm_logradouro"</span>,</span></span>
<span class="r-in"><span>  numero <span class="op">=</span> <span class="st">"Numero"</span>,</span></span>
<span class="r-in"><span>  cep <span class="op">=</span> <span class="st">"Cep"</span>,</span></span>
<span class="r-in"><span>  bairro <span class="op">=</span> <span class="st">"Bairro"</span>,</span></span>
<span class="r-in"><span>  municipio <span class="op">=</span> <span class="st">"nm_municipio"</span>,</span></span>
<span class="r-in"><span>  estado <span class="op">=</span> <span class="st">"nm_uf"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">geocodebr</span><span class="fu">::</span><span class="fu">geocode</span><span class="op">(</span></span></span>
<span class="r-in"><span>  addresses_table <span class="op">=</span> <span class="va">input_df</span>,</span></span>
<span class="r-in"><span>  address_fields <span class="op">=</span> <span class="va">fields</span>,</span></span>
<span class="r-in"><span>  progress <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id            nm_logradouro Numero       Cep               Bairro</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1 RUA MARIA LUCIA PACIFICO     17 26042-730           SANTA RITA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  2      RUA LEOPOLDINA TOME     46 25030-050           CENTENARIO</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  3          RUA DONA JUDITE      0 23915-700          CAPUTERA II</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  4     RUA ALEXANDRE AMARAL      0 23098-120           SANTISSIMO</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  5                AVENIDA E    300 23860-000         PRAIA GRANDE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  6      RUA PRINCESA ISABEL    263 69921-026 ESTACAO EXPERIMENTAL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      nm_municipio code_muni          nm_uf       lon        lat match_type</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     NOVA IGUACU   3303500 RIO DE JANEIRO -43.47118 -22.695496       en01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 DUQUE DE CAXIAS   3301702 RIO DE JANEIRO -43.31134 -22.779173       en01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  ANGRA DOS REIS   3300100 RIO DE JANEIRO -44.20848 -22.978837       er01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  RIO DE JANEIRO   3304557 RIO DE JANEIRO -43.51150 -22.868992       er01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     MANGARATIBA   3302601 RIO DE JANEIRO -43.97214 -22.929864       en01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      RIO BRANCO   1200401           ACRE -67.83559  -9.963436       en01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   precision</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    number</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    number</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    street</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    street</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    number</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    number</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Daniel Herszenhut, Rafael H. M. Pereira, Ipea - Institute for Applied Economic Research.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

