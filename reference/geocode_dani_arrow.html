<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Geocode Brazilian addresses — geocode_dani_arrow • geocodebr</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Geocode Brazilian addresses — geocode_dani_arrow"><meta name="description" content="Geocodes Brazilian addresses based on CNEFE data. Addresses must be passed as
a data frame in which each column describes one address field (street name,
street number, neighborhood, etc). The input addresses are matched with CNEFE
following 12 different case patterns. For more info, please see the Details
section."><meta property="og:description" content="Geocodes Brazilian addresses based on CNEFE data. Addresses must be passed as
a data frame in which each column describes one address field (street name,
street number, neighborhood, etc). The input addresses are matched with CNEFE
following 12 different case patterns. For more info, please see the Details
section."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">geocodebr</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.0.0.9001</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/geocodebr.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/geocoding_en.html">Geocoding with geocodebr (ENG)</a></li>
    <li><a class="dropdown-item" href="../articles/geocoding_pt.html">Geolocalização com geocodebr (PORT)</a></li>
    <li><a class="dropdown-item" href="../articles/reverse_geocoding.html">Reverse-geocoding (ENG)</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ipeaGIT/geocodebr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Geocode Brazilian addresses</h1>
      <small class="dont-index">Source: <a href="https://github.com/ipeaGIT/geocodebr/blob/main/R/geocode_dani_arrow.R" class="external-link"><code>R/geocode_dani_arrow.R</code></a></small>
      <div class="d-none name"><code>geocode_dani_arrow.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Geocodes Brazilian addresses based on CNEFE data. Addresses must be passed as
a data frame in which each column describes one address field (street name,
street number, neighborhood, etc). The input addresses are matched with CNEFE
following 12 different case patterns. For more info, please see the Details
section.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">geocode_dani_arrow</span><span class="op">(</span></span>
<span>  <span class="va">addresses_table</span>,</span>
<span>  address_fields <span class="op">=</span> <span class="fu"><a href="setup_address_fields.html">setup_address_fields</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  n_cores <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  cache <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-addresses-table">addresses_table<a class="anchor" aria-label="anchor" href="#arg-addresses-table"></a></dt>
<dd><p>A data frame. The addresses to be geocoded. Each
column must represent an address field.</p></dd>


<dt id="arg-address-fields">address_fields<a class="anchor" aria-label="anchor" href="#arg-address-fields"></a></dt>
<dd><p>A character vector. The correspondence between each
address field and the name of the column that describes it in the
<code>addresses_table</code>. The <code><a href="setup_address_fields.html">setup_address_fields()</a></code> function helps creating
this vector and performs some checks on the input. Address fields
passed as <code>NULL</code> are ignored and the function must receive at least one
non-null field. If manually creating the vector, please note that the
vector names should be the same names used in the <code><a href="setup_address_fields.html">setup_address_fields()</a></code>
parameters.</p></dd>


<dt id="arg-n-cores">n_cores<a class="anchor" aria-label="anchor" href="#arg-n-cores"></a></dt>
<dd><p>A number. The number of cores to be used in parallel
execution. Defaults to 1.</p></dd>


<dt id="arg-progress">progress<a class="anchor" aria-label="anchor" href="#arg-progress"></a></dt>
<dd><p>A logical. Whether to display progress bars when downloading
CNEFE data and when geocoding the addresses. Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-cache">cache<a class="anchor" aria-label="anchor" href="#arg-cache"></a></dt>
<dd><p>A logical. Whether CNEFE data should be saved to/read from
cache, reducing processing time in future calls. Defaults to <code>TRUE</code>. When
<code>FALSE</code>, CNEFE data is downloaded to a temporary directory.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns the data frame passed in <code>addresses_table</code> with the latitude
(<code>lat</code>) and longitude (<code>lon</code>) of each matched address, as well as another
column (<code>match_type</code>) indicating the match level with which the address was
matched.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The input addresses are deterministically matched with CNEFE following 12
different case patterns. The type of match found for each address in the
input data is indicated by the <code>match_type</code> column in the output. In every
match type, the function always calculates the average latitude and longitude
of all addresses in CNEFE that match the input address. In the strictest case,
the function finds a perfect match for all of the fields of a given address.
Think for example of a building with several apartments that match the same
street address. In such case, the coordinates of the apartments will differ
very slightly, and geocodebr take the average of those coordinates. On the
other hand, in the loosest case, in which only the state and the city are
matched, geocodebr takes the city-wide average coordinates, which tends to
favor more densely populated areas. The columns considered in each of the 12
different match types are described below:</p><ul><li><p>Case 01: estado, município, logradouro, número, cep e bairro;</p></li>
<li><p>Case 02: estado, município, logradouro, número e cep;</p></li>
<li><p>Case 03: estado, município, logradouro, número e bairro;</p></li>
<li><p>Case 04: estado, município, logradouro e número;</p></li>
<li><p>Case 05: estado, município, logradouro, cep e bairro;</p></li>
<li><p>Case 06: estado, município, logradouro e cep;</p></li>
<li><p>Case 07: estado, município, logradouro e bairro;</p></li>
<li><p>Case 08: estado, município e logradouro;</p></li>
<li><p>Case 09: estado, município, cep e bairro;</p></li>
<li><p>Case 10: estado, município e cep;</p></li>
<li><p>Case 11: estado, município e bairro;</p></li>
<li><p>Case 12: estado, município.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">data_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/small_sample.csv"</span>, package <span class="op">=</span> <span class="st">"geocodebr"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">input_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="va">data_path</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fields</span> <span class="op">&lt;-</span> <span class="fu"><a href="setup_address_fields.html">setup_address_fields</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  logradouro <span class="op">=</span> <span class="st">"nm_logradouro"</span>,</span></span>
<span class="r-in"><span>  numero <span class="op">=</span> <span class="st">"Numero"</span>,</span></span>
<span class="r-in"><span>  cep <span class="op">=</span> <span class="st">"Cep"</span>,</span></span>
<span class="r-in"><span>  bairro <span class="op">=</span> <span class="st">"Bairro"</span>,</span></span>
<span class="r-in"><span>  municipio <span class="op">=</span> <span class="st">"nm_municipio"</span>,</span></span>
<span class="r-in"><span>  estado <span class="op">=</span> <span class="st">"nm_uf"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># df &lt;- geocodebr:::geocode_dani(input_df, address_fields = fields, progress = FALSE)</span></span></span>
<span class="r-in"><span><span class="co"># df</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Daniel Herszenhut, Rafael H. M. Pereira, Ipea - Institute for Applied Economic Research.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

